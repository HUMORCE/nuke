{
    "version": "nightly",
    "description": "Generates interception certificates compatible with iOS and Android",
    "homepage": "https://www.telerik.com/fiddler/add-ons",
    "license": "MIT",
    "suggest": {
        "fiddler": "nuke/fiddler"
    },
    "url": "https://telerik-fiddler.s3.amazonaws.com/fiddler/addons/fiddlercertmaker.exe#dl.7z",
    "pre_install": "Remove-Item \"$dir\\`$PLUGINSDIR\", \"$dir\\*.nsis\" -Force -Recurse",
    "installer": {
        "script": [
            "if (Test-Path \"$(appdir fiddler $global)\\current\\Fiddler.exe\") { ",
            "Get-ChildItem \"$dir\\*\" -Include 'BCMakeCert.dll', 'CertMaker.dll' | Copy-Item -Destination \"$(appdir fiddler $global)\\current\" -ErrorAction SilentlyContinue }",
            "if (Test-Path \"$(appdir fiddler $global)\\current\\persist\") { ",
            "Get-ChildItem \"$dir\\*\" -Include 'BCMakeCert.dll', 'CertMaker.dll' | Copy-Item -Destination \"$(appdir fiddler $global)\\current\\persist\" -ErrorAction SilentlyContinue }"
        ]
    },
    "uninstaller": {
        "script": [
            "if (Test-Path \"$(appdir fiddler $global)\\current\\Fiddler.exe\") { ",
            "Get-ChildItem \"$(appdir fiddler $global)\\current\\*\" -Include 'BCMakeCert.dll', 'CertMaker.dll' | Remove-Item -ErrorAction SilentlyContinue }",
            "if (Test-Path \"$(appdir fiddler $global)\\current\\persist\") { ",
            "Get-ChildItem \"$(appdir fiddler $global)\\current\\persist\\*\" -Include 'BCMakeCert.dll', 'CertMaker.dll' | Remove-Item -ErrorAction SilentlyContinue }"
        ]
    }
}
